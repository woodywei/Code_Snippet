'''Palindrome dates'''

from datetime import datetime
from itertools import chain


def chunks(lst, n):
    """Yield successive n-sized chunks from lst."""
    for i in range(0, len(lst), n):
        yield lst[i:i + n]


def palinDay(y):
    '''A possibly empty list containing the palindromic
       date for the given year, if such a date exists.
    '''
    s = str(y).rjust(4, '0')
    r = s[::-1]
    iso = ''.join([s, r[0:2], r[2:]])
    try:
        datetime.strptime(iso, '%Y%m%d')
        return [iso]
    except ValueError:
        return []


def palinDay2(y):
    ''' include something like 00010101'''
    res = []
    for month in range(1, 13):
        for day in range(1, 31 + (month % 2 == (month < 8)) - 2 * (month == 2)):
            t = "%02d%02d" % (month, day)
            for i in range(1, 5):
                part = t[::-1][:i]
                date = part + t
                if date == date[::-1]:
                    iso = date.rjust(8, '0')
                    try:
                        x = datetime.strptime(iso, '%Y%m%d')
                        if x < datetime(y, 1, 1, 0, 0):
                            res.append(iso)
                    except:
                        pass
    return res


if __name__ == "__main__":
    palinDates = list(chain.from_iterable(
        map(palinDay, range(0, 2022))
    ))
    print(len(palinDates))
    print(list(chunks(palinDates, 5)))

    res = palinDay2(2022)
    res = sorted(res)
    print(len(res))
    print(list(chunks(res, 5)))


'''
83
[['01011010', '01100110', '01111110', '01200210', '01211210'], ['01300310', '01400410', '01500510', '01600610', '01700710'], ['01800810', '01900910', '02011020', '02100120', '02111120'], ['02200220', '02211220', '02300320', '02400420', '02500520'], ['02600620', '02700720', '02800820', '02900920', '03011030'], ['03100130', '03111130', '03211230', '03300330', '03400430'], ['03500530', '03600630', '03700730', '03800830', '03900930'], ['10011001', '10100101', '10111101', '10200201', '10211201'], ['10300301', '10400401', '10500501', '10600601', '10700701'], ['10800801', '10900901', '11011011', '11100111', '11111111'], ['11200211', '11211211', '11300311', '11400411', '11500511'], ['11600611', '11700711', '11800811', '11900911', '12011021'], ['12100121', '12111121', '12200221', '12211221', '12300321'], ['12400421', '12500521', '12600621', '12700721', '12800821'], ['12900921', '13011031', '13100131', '13211231', '13300331'], ['13500531', '13700731', '13800831', '20011002', '20100102'], ['20111102', '20200202', '20211202']]
586
[['00010101', '00010201', '00010301', '00010401', '00010501'], ['00010601', '00010701', '00010801', '00010901', '00011011'], ['00011110', '00011111', '00011211', '00020102', '00020202'], ['00020302', '00020402', '00020502', '00020602', '00020702'], ['00020802', '00020902', '00021012', '00021112', '00021120'], ['00021212', '00030103', '00030203', '00030303', '00030403'], ['00030503', '00030603', '00030703', '00030803', '00030903'], ['00031013', '00031113', '00031130', '00031213', '00040104'], ['00040204', '00040304', '00040404', '00040504', '00040604'], ['00040704', '00040804', '00040904', '00041014', '00041114'], ['00041214', '00050105', '00050205', '00050305', '00050405'], ['00050505', '00050605', '00050705', '00050805', '00050905'], ['00051015', '00051115', '00051215', '00060106', '00060206'], ['00060306', '00060406', '00060506', '00060606', '00060706'], ['00060806', '00060906', '00061016', '00061116', '00061216'], ['00070107', '00070207', '00070307', '00070407', '00070507'], ['00070607', '00070707', '00070807', '00070907', '00071017'], ['00071117', '00071217', '00080108', '00080208', '00080308'], ['00080408', '00080508', '00080608', '00080708', '00080808'], ['00080908', '00081018', '00081118', '00081218', '00090109'], ['00090209', '00090309', '00090409', '00090509', '00090609'], ['00090709', '00090809', '00090909', '00091019', '00091119'], ['00091219', '00101010', '00101101', '00110110', '00111110'], ['00111111', '00120210', '00121121', '00121210', '00130310'], ['00140410', '00150510', '00160610', '00170710', '00180810'], ['00190910', '00201020', '00201102', '00210120', '00211112'], ['00211120', '00220220', '00221122', '00221220', '00230320'], ['00240420', '00250520', '00260620', '00270720', '00280820'], ['00290920', '00301030', '00301103', '00310130', '00311113'], ['00311130', '00321123', '00321230', '00330330', '00340430'], ['00350530', '00360630', '00370730', '00380830', '00390930'], ['00401104', '00411114', '00421124', '00501105', '00511115'], ['00521125', '00601106', '00611116', '00621126', '00701107'], ['00711117', '00721127', '00801108', '00811118', '00821128'], ['00901109', '00911119', '00921129', '01001001', '01010101'], ['01011010', '01011101', '01020201', '01021201', '01030301'], ['01040401', '01050501', '01060601', '01070701', '01080801'], ['01090901', '01100110', '01101011', '01110111', '01111110'], ['01111111', '01120211', '01121211', '01130311', '01140411'], ['01150511', '01160611', '01170711', '01180811', '01190911'], ['01200210', '01201021', '01210121', '01211121', '01211210'], ['01220221', '01221221', '01230321', '01240421', '01250521'], ['01260621', '01270721', '01280821', '01290921', '01300310'], ['01301031', '01310131', '01321231', '01330331', '01350531'], ['01370731', '01380831', '01400410', '01500510', '01600610'], ['01700710', '01800810', '01900910', '02001002', '02010102'], ['02011020', '02011102', '02020202', '02021202', '02030302'], ['02040402', '02050502', '02060602', '02070702', '02080802'], ['02090902', '02100120', '02101012', '02110112', '02111112'], ['02111120', '02120212', '02121212', '02130312', '02140412'], ['02150512', '02160612', '02170712', '02180812', '02190912'], ['02200220', '02201022', '02210122', '02211122', '02211220'], ['02220222', '02221222', '02230322', '02240422', '02250522'], ['02260622', '02270722', '02280822', '02290922', '02300320'], ['02400420', '02500520', '02600620', '02700720', '02800820'], ['02900920', '03001003', '03010103', '03011030', '03011103'], ['03020203', '03021203', '03030303', '03040403', '03050503'], ['03060603', '03070703', '03080803', '03090903', '03100130'], ['03101013', '03110113', '03111113', '03111130', '03120213'], ['03121213', '03130313', '03140413', '03150513', '03160613'], ['03170713', '03180813', '03190913', '03201023', '03210123'], ['03211123', '03211230', '03220223', '03221223', '03230323'], ['03240423', '03250523', '03260623', '03270723', '03280823'], ['03290923', '03300330', '03400430', '03500530', '03600630'], ['03700730', '03800830', '03900930', '04001004', '04010104'], ['04011104', '04020204', '04021204', '04030304', '04040404'], ['04050504', '04060604', '04070704', '04080804', '04090904'], ['04101014', '04110114', '04111114', '04120214', '04121214'], ['04130314', '04140414', '04150514', '04160614', '04170714'], ['04180814', '04190914', '04201024', '04210124', '04211124'], ['04220224', '04221224', '04230324', '04240424', '04250524'], ['04260624', '04270724', '04280824', '04290924', '05001005'], ['05010105', '05011105', '05020205', '05021205', '05030305'], ['05040405', '05050505', '05060605', '05070705', '05080805'], ['05090905', '05101015', '05110115', '05111115', '05120215'], ['05121215', '05130315', '05140415', '05150515', '05160615'], ['05170715', '05180815', '05190915', '05201025', '05210125'], ['05211125', '05220225', '05221225', '05230325', '05240425'], ['05250525', '05260625', '05270725', '05280825', '05290925'], ['06001006', '06010106', '06011106', '06020206', '06021206'], ['06030306', '06040406', '06050506', '06060606', '06070706'], ['06080806', '06090906', '06101016', '06110116', '06111116'], ['06120216', '06121216', '06130316', '06140416', '06150516'], ['06160616', '06170716', '06180816', '06190916', '06201026'], ['06210126', '06211126', '06220226', '06221226', '06230326'], ['06240426', '06250526', '06260626', '06270726', '06280826'], ['06290926', '07001007', '07010107', '07011107', '07020207'], ['07021207', '07030307', '07040407', '07050507', '07060607'], ['07070707', '07080807', '07090907', '07101017', '07110117'], ['07111117', '07120217', '07121217', '07130317', '07140417'], ['07150517', '07160617', '07170717', '07180817', '07190917'], ['07201027', '07210127', '07211127', '07220227', '07221227'], ['07230327', '07240427', '07250527', '07260627', '07270727'], ['07280827', '07290927', '08001008', '08010108', '08011108'], ['08020208', '08021208', '08030308', '08040408', '08050508'], ['08060608', '08070708', '08080808', '08090908', '08101018'], ['08110118', '08111118', '08120218', '08121218', '08130318'], ['08140418', '08150518', '08160618', '08170718', '08180818'], ['08190918', '08201028', '08210128', '08211128', '08220228'], ['08221228', '08230328', '08240428', '08250528', '08260628'], ['08270728', '08280828', '08290928', '09001009', '09010109'], ['09011109', '09020209', '09021209', '09030309', '09040409'], ['09050509', '09060609', '09070709', '09080809', '09090909'], ['09101019', '09110119', '09111119', '09120219', '09121219'], ['09130319', '09140419', '09150519', '09160619', '09170719'], ['09180819', '09190919', '09201029', '09210129', '09211129'], ['09221229', '09230329', '09240429', '09250529', '09260629'], ['09270729', '09280829', '09290929', '10011001', '10100101'], ['10111101', '10200201', '10211201', '10300301', '10400401'], ['10500501', '10600601', '10700701', '10800801', '10900901'], ['11011011', '11100111', '11111111', '11200211', '11211211'], ['11300311', '11400411', '11500511', '11600611', '11700711'], ['11800811', '11900911', '12011021', '12100121', '12111121'], ['12200221', '12211221', '12300321', '12400421', '12500521'], ['12600621', '12700721', '12800821', '12900921', '13011031'], ['13100131', '13211231', '13300331', '13500531', '13700731'], ['13800831', '20011002', '20100102', '20111102', '20200202'], ['20211202']]

'''